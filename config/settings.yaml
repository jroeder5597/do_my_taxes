# Tax Document Processor - Configuration Settings
# 
# This file is the SINGLE SOURCE OF TRUTH for all configuration.
# Modify values here to customize for your environment.
#

project:
  name: "Tax Document Processor"
  version: "1.0.0"
  description: "OCR and LLM-based tax document processing system"

paths:
  raw_documents: "data"
  processed: "data/processed"
  exports: "data/exports"
  database: "db/taxes.db"
  logs: "logs"

ocr:
  # Flyfield PDF extraction service URL
  service_url: "http://127.0.0.1:5001"
  # OCR language
  languages: ["eng"]
  # DPI for PDF processing (higher = better quality but slower)
  dpi: 400
  pdf_to_image_dpi: 400

llm:
  provider: "ollama"  # Options: "ollama" or "openai"
  ollama:
    # Ollama server URL - change to your Ollama host address
    base_url: "http://localhost:11434"
    # Ollama model to use for extraction (gpt-oss:20b is larger/more accurate)
    model: "qwen3:8b"
    extraction_options:
      temperature: 0.0
      num_ctx: 16384
      num_predict: 4096
    assistant_options:
      temperature: 0.3
      num_ctx: 16384
      num_predict: 2048
  openai:
    # OpenAI-compatible API URL (e.g., https://api.openai.com/v1, https://api.groq.com/openai/v1)
    base_url: "https://api.openai.com/v1"
    # API key - WARNING: Never commit actual API keys to version control
    api_key: "sk-your-api-key-here"
    # Model name (e.g., gpt-4o-mini, llama-3.1-70b-versatile)
    model: "gpt-4o-mini"
    extraction_options:
      temperature: 0.0
      num_ctx: 16384
      num_predict: 4096
    assistant_options:
      temperature: 0.3
      num_ctx: 16384
      num_predict: 2048

storage:
  sqlite:
    database: "db/taxes.db"
  qdrant:
    # Qdrant server host - use 'localhost' for local Podman container
    host: "localhost"
    # Qdrant server port
    port: 6333
    collection: "tax_documents"
    embedding_provider: "ollama"  # Options: "local" (sentence-transformers) or "ollama"
    embedding_model: "qwen3-embedding:0.6b"  # Ollama embedding model to use
    vector_size: 1024  # Vector size for qwen3-embedding:0.6b (384 for all-MiniLM-L6-v2)

web_search:
  # Enable web search fallback for tax guidance
  # IMPORTANT: Web searches are ONLY for general tax guidance
  # NO personal information (names, SSN, employers, etc.) is ever sent to search engines
  enabled: true
  searxng:
    # SearXNG server host - use 'localhost' for local Podman container
    host: "localhost"
    # SearXNG server port
    port: 8080
    # Search request timeout in seconds
    timeout: 10
    # Search engines to use (empty = all available)
    engines: []
    # Maximum results to return
    max_results: 5

screen_assistant:
  capture_hotkey: "ctrl+shift+s"
  poll_interval: 2  # seconds between screen captures in continuous mode

logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/tax_processor.log"